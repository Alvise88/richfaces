<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:input="http://richfaces.org/input"
	xmlns:rich="http://richfaces.org/iteration"
	xmlns:a4j="http://richfaces.org/a4j">
<f:view contentType="text/html" />

<h:head>
	<title>Richfaces Autocomplete</title>
</h:head>

<h:body style="margin: 30px;">

<ui:composition template="/templates/template.xhtml">

    <ui:define name="title">Autocomplete Example</ui:define>
    <ui:define name="body_head">Autocomplete Example</ui:define>

    <ui:define name="body">

	<h:form id="form">
		<h:selectOneMenu value="#{autoCompleteBean.mode}" onchange="submit()">
			<f:selectItem itemValue="lazyClient"/>
			<f:selectItem itemValue="client"/>
			<f:selectItem itemValue="cachedAjax"/>
			<f:selectItem itemValue="ajax"/>
		</h:selectOneMenu><br/>
		<div style="height: 300px; width: 300px; overflow: auto; float:left;">Text
		block text block text block text block text block text block text
		block text block
		<script type="text/javascript">
			function customFilterFunction(subString, value) {
				if(subString.length>1)
					if(value.indexOf(subString)!=-1) return true;
			}
		</script>

		<input:autocomplete autofill="false" id="myAutocomplete" clientFilterFunction="customFilterFunction" mode="#{autoCompleteBean.mode}" minChars="2" autocompleteMethod="#{autoCompleteBean.autocomplete}" var="country" fetchValue="#{country.name}" showButton="true"
		 value = "#{autoCompleteBean.value}" layout="list"
		 onchange="return onEvent.call(this, event);" onselectitem="return onEvent.call(this, event);" onblur="return onEvent.call(this, event);" onfocus="return onEvent.call(this, event);">
			#{country.name} #{country.iso} #{country.domain}
		<a4j:ajax event="change" render="output"/>
		</input:autocomplete>
		<br /><h:outputText value="RF-9835:" /><br />
		<input:autocomplete id="myAutocomplete1" mode="client" autocompleteMethod="#{autoCompleteBean.autocomplete}" var="country" fetchValue="#{country.name}" showButton="true"
		 value = "#{autoCompleteBean.value}" layout="table">
		 	<rich:column>
		 		<h:outputText value="#{country.name}" />
			</rich:column>
			<rich:column>
		 		<h:outputText value="#{country.iso}" />
			</rich:column>
			<rich:column>
		 		<h:outputText value="#{country.domain}" />
			</rich:column>
		<a4j:ajax event="change" render="output"/>
		</input:autocomplete>
		<br/><br/>
            Your selection: <h:outputText id="output" value="#{autoCompleteBean.value}"/>
		<script type="text/javascript">
			onEvent = function(event, element, data){
				RichFaces.log.info("jQuery Event: "+(event instanceof jQuery.Event)+"; event: "+event.type+"; data:"+(data || (event['rich']||{})['data'])+"; this.id:"+this.id+"; component:"+ (event['rich']||{})['component']||RichFaces.$(this.id));
			};
			RichFaces.Event.bindById("form:myAutocomplete", "selectitem change blur focus", onEvent);
		</script>
		<br />
		<select style="width: 200px" name="select">
			<option>ccccc</option>
		</select> &nbsp;text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block text block text block text block text
		block text block text block
		</div>
		<div>
			<a4j:log mode="inline"></a4j:log>
		</div>
	</h:form>
	<h:form>
		RF-9567:<br/><br/>
		<a4j:outputPanel ajaxRendered="true"><h:messages /></a4j:outputPanel>
		
		
		<input:autocomplete mode="ajax" id="autocomplete" autocompleteMethod="#{autoCompleteBean.autocomplete}" value="#{autoCompleteBean.value}">
		<f:validateRegex pattern="Alabama" />
		</input:autocomplete>

		<a4j:commandButton render="@form" execute="autocomplete" />
	</h:form>
	<h:form>
	<input:autocomplete mode="cachedAjax" tokens="," minChars="0"
autofill="true" selectFirst="false" layout="table"
autocompleteMethod="#{autoCompleteBean.autocomplete}" var="country" fetchValue="#{country.name}">
<h:column>
#{country.name}
</h:column>
<h:column>
#{country.iso}
</h:column>
</input:autocomplete>
</h:form>
	
	</ui:define>
</ui:composition>
	
</h:body>
</html>
