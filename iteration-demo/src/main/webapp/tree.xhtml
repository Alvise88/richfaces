<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:it="http://richfaces.org/iteration">
<f:view contentType="text/html" />

<h:head>
	<title>Richfaces Tree</title>
</h:head>

<h:body>
	<h:messages id="messages" />

	<h:form>
		Toggle mode: <h:selectOneRadio value="#{treeBean.toggleType}" onclick="submit()">
			<f:selectItems value="#{treeBean.types}" var="item" itemValue="#{item}" />
		</h:selectOneRadio>

		Selection mode: <h:selectOneRadio value="#{treeBean.selectionType}" onclick="submit()">
			<f:selectItems value="#{treeBean.types}" itemDisabled="#{item == 'server'}" var="item" itemValue="#{item}" />
		</h:selectOneRadio>
	</h:form>

	<h:form id="form">
		<it:tree id="tree" nodeType="#{node.parent == null ? 'rootNode': 'childNode'}" var="node" value="#{treeBean.rootNodes}" 
			selectionType="#{treeBean.selectionType}" toggleType="#{treeBean.toggleType}" selection="#{treeBean.selection}">
			<it:treeNode type="rootNode">
				<h:panelGroup id="rootNodeGroup">
					Root node: #{node.data} - 
					<h:commandLink value="link" action="#{treeBean.clickNode}">
						<f:setPropertyActionListener value="#{node.data}" target="#{treeBean.nodeData}" />
					
						<f:ajax render=":messages" />						
					</h:commandLink>
				</h:panelGroup>
			</it:treeNode>
			<it:treeNode type="childNode">
				<h:panelGroup id="childNodeGroup">
					#{node.data} - 
					<h:commandLink value="link" action="#{treeBean.clickNode}">
						<f:setPropertyActionListener value="#{node.data}" target="#{treeBean.nodeData}" />
					
						<f:ajax render=":messages" />						
					</h:commandLink>
				</h:panelGroup>
			</it:treeNode>
		</it:tree>

		<h:commandLink value="Re-render">
			<f:ajax render=":form:tree" execute="@all" />
		</h:commandLink>
	</h:form>
</h:body>
</html>
